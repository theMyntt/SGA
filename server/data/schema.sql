DROP DATABASE IF EXISTS USERS;

CREATE DATABASE IF NOT EXISTS USERS;

USE USERS;

CREATE TABLE SCHOOL_INFORMATION (
	ID_SCHOOL VARCHAR(255) NOT NULL,
    NAME_SCHOOL VARCHAR(100) NOT NULL,
    CELLPHONE_SCHOOL VARCHAR(11) NOT NULL,
    PRIMARY KEY (ID_SCHOOL)
);

CREATE TABLE SUBJECT_INFO (
    ID_SUBJECT VARCHAR(255) NOT NULL,
    NAME_SUBJECT VARCHAR(100) NOT NULL,
    PRIMARY KEY (ID_SUBJECT)
);

CREATE TABLE USER_INFORMATION (
	ID_USER VARCHAR(255) NOT NULL,
    EMAIL_USER VARCHAR(90) NOT NULL,
    PASSWORD_USER VARCHAR(255) NOT NULL,
    CELLPHONE_USER VARCHAR(11),
    FIRST_NAME_USER VARCHAR(80) NOT NULL,
    LAST_NAME_USER VARCHAR(80) NOT NULL,
    SCHOOL_ID_SCHOOL VARCHAR(255) NOT NULL,
    PRIMARY KEY (ID_USER),
    UNIQUE(EMAIL_USER),
    FOREIGN KEY (SCHOOL_ID_SCHOOL) REFERENCES SCHOOL_INFORMATION(ID_SCHOOL)
);

CREATE TABLE USER_MESSAGES (
    ID_MESSAGES VARCHAR(255) NOT NULL,
    USER_ID_USER VARCHAR(255) NOT NULL,
    SUBJECT_MESSAGE_USER VARCHAR(255) NOT NULL,
    MESSAGE_USER VARCHAR(255) NOT NULL,
    PRIMARY KEY (ID_SUBJECT),
    FOREIGN KEY (USER_ID_USER) REFERENCES USER_INFORMATION(ID_USER)
);

CREATE TABLE USER_MENTION (
    ID_MENTION VARCHAR(255) NOT NULL,
    GRADE_MENTION CHAR(2) NOT NULL,
    SUBJECT_ID_SUBJECT VARCHAR(255) NOT NULL,
    SCHOOL_ID_SCHOOL VARCHAR(255) NOT NULL,
    USER_ID_USER VARCHAR(255) NOT NULL,
    PRIMARY KEY (ID_MENTION),
    FOREIGN KEY (SUBJECT_ID_SUBJECT) REFERENCES SUBJECT_INFO(ID_SUBJECT),
    FOREIGN KEY (SCHOOL_ID_SCHOOL) REFERENCES SCHOOL_INFORMATION(ID_SCHOOL),
    FOREIGN KEY (USER_ID_USER) REFERENCES USER_INFORMATION(ID_USER)
);

INSERT INTO SCHOOL_INFORMATION(NAME_SCHOOL, CELLPHONE_SCHOOL) VALUES
	("E.E Test", "11990000000");
        
INSERT INTO USER_INFORMATION(
	EMAIL_USER,
    PASSWORD_USER,
    CELLPHONE_USER,
    FIRST_NAME_USER,
    LAST_NAME_USER,
    SCHOOL_ID_SCHOOL
) VALUES
	("admin@admin.org", "ef797c8118f02dfb649607dd5d3f8c7623048c9c063d532cc95c5ed7a898a64f", "11990000000", "admin", "admin", 1);
    
SELECT * 
FROM USER_INFORMATION 
WHERE EMAIL_USER = "admin@admin.org"

SELECT * 
FROM USER_INFORMATION;

DELETE FROM USER_INFORMATION
WHERE EMAIL_USER = "testacount@admin.org";